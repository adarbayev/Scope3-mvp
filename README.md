<div id="documentationContent" class="tab-content hidden documentation-section">
                    <h3>Methodology Documentation</h3><p>This calculator estimates Scope 3, Category 1 (Purchased Goods and Services) emissions based on user inputs and a simplified, predefined emission factor database.</p><h3>1. Input Data</h3><p>The user provides the following information:</p><ul><li><strong>Reporting Year:</strong> The year for which the emissions are being calculated. This influences which year-specific factors are prioritized.</li><li><strong>Product Category:</strong> The general category of the purchased good/service (e.g., "Aluminium products").</li><li><strong>Material (optional):</strong> Specific material information (e.g., "Wrought Aluminium Alloy").</li><li><strong>Manufacturing Process (optional):</strong> Specific manufacturing process (e.g., "Extrusion Shaping").</li><li><strong>Country of Origin (optional):</strong> The country where the good was produced or service rendered. Defaults to "Global" if unspecified.</li><li><strong>Quantity / Amount:</strong> The amount of the purchased good/service.</li><li><strong>Unit for Quantity/Amount:</strong> The unit for the quantity, which determines if a weight-based (kg, tonne) or spend-based (EUR, USD) calculation is performed.</li><li><strong>Supplier-Specific Data (Optional):</strong><ul><li>Indication if supplier-specific Product Carbon Footprint (PCF) data is available (Yes/No).</li><li>If Yes: Supplier PCF Value and its Unit (e.g., kgCO₂e/kg, kgCO₂e/EUR).</li></ul></li></ul>
                    <h3>2. Emission Factor Determination Logic</h3>
                    <p>The system prioritizes emission factors in the following order:</p>
                    <ol>
                        <li><strong>Supplier-Specific PCF:</strong><p>If the user selects "Yes" for supplier-specific data and provides a valid PCF value and unit:</p><ul><li>This PCF value is used directly.</li><li>The unit of the supplier PCF must align with the "Unit for Quantity/Amount" (i.e., both weight-based or both spend-based).</li><li>If the supplier PCF is in `kgCO₂e/tonne`, it's converted to `kgCO₂e/kg` for internal consistency before calculation.</li><li>Database lookup is skipped.</li></ul></li>
                        <li><strong>Database Lookup (if no valid supplier PCF):</strong><p>If supplier data is not used, the system searches its internal `emissionFactorsDB`.</p>
                            <ul>
                                <li><strong>Initial Filtering:</strong> Candidates are first filtered by:<ul><li>Matching the user-selected "Product Category".</li><li>Matching the type of "Unit for Quantity/Amount" (i.e., weight-based factors like `kgCO₂e/kg` or spend-based factors like `kgCO₂e/EUR`).</li></ul></li>
                                <li><strong>Fallback Category:</strong> If no factors are found for the specific category, the system attempts to find factors under a "Default Fallback" category for the required unit type.</li>
                                <li><strong>Scoring Mechanism:</strong> Remaining candidates are scored to find the best match. Higher scores are better. The scoring considers:
                                    <ul>
                                        <li><strong>Reporting Year Match:</strong> Factors are prioritized based on their applicability to the reporting year.
                                            <ol style="list-style-type: lower-alpha; margin-left: 1rem;">
                                                <li><em>Exact Match:</em> Factors for the exact reporting year are preferred most (highest score contribution).</li>
                                                <li><em>Most Recent Past Year:</em> If no exact match, the most recent factor from a past year is chosen. The closer this past year is to the reporting year, the better.</li>
                                                <li><em>Generic Year:</em> If no exact or relevant past year factor, a generic factor (not tied to a specific year, i.e., `year` is `null` in the database) is used.</li>
                                                <li><em>Closest Future Year:</em> As a last resort (before broader fallbacks), the closest future year's factor may be selected if no other year criteria are met. This is scored lower than past or generic years.</li>
                                            </ol>
                                        </li>
                                        <li><strong>Material Match:</strong> Matches the optional "Material" input (e.g., +50 for exact, +10 if both generic, penalties/minor points for partials).</li>
                                        <li><strong>Process Match:</strong> Matches the optional "Manufacturing Process" input (e.g., +30 for exact, +5 if both generic, penalties/minor points for partials).</li>
                                        <li><strong>Country Match:</strong> Matches the optional "Country of Origin" (e.g., +20 for exact, +10 if factor is Global and user specified country).</li>
                                        <li><strong>Specificity Penalty:</strong> Ensures specific factors are preferred over generic fallbacks when possible (e.g., -1000 for "Default Fallback" if category-specific factors were available).</li>
                                    </ul>
                                </li>
                                <li>The candidate with the highest score is selected. The logic trace for this selection can be viewed by clicking the (i) icon in the results.</li>
                            </ul>
                        </li>
                    </ol>
                    <h3>3. Emission Calculation</h3><p>The core calculation is:</p><p><code>Total Emissions (kg CO₂e) = Effective Quantity × Emission Factor Value (in kgCO₂e per unit of Effective Quantity)</code></p><ul><li><strong>Effective Quantity:</strong><ul><li>If "Unit for Quantity/Amount" is "kg" or "EUR" or "USD", Effective Quantity = User Input Quantity.</li><li>If "Unit for Quantity/Amount" is "tonne", Effective Quantity = User Input Quantity × 1000 (to convert to kg for consistency with kg-based factors).</li></ul></li><li><strong>Emission Factor Value:</strong><ul><li>This is the `factor` value from the selected database entry or the (potentially converted) supplier-provided PCF.</li><li>All weight-based factors in the database or from suppliers (if per tonne) are effectively treated as `kgCO₂e/kg` for calculation. Spend-based factors are `kgCO₂e/EUR` (USD is treated as EUR for this MVP).</li></ul></li></ul><h3>4. Final Output Conversion</h3><p>The calculated "Total Emissions (kg CO₂e)" are then converted to tonnes for display:</p><p><code>Displayed Emissions (t CO₂e) = Total Emissions (kg CO₂e) / 1000</code></p><p>Numbers in the results (factor value, total emissions) are formatted with a space as a thousands separator and 2 decimal places for the final emissions (factors may show more precision).</p><h3>5. Emission Factor Database (`emissionFactorsDB`)</h3><p>This is a simplified internal JavaScript array containing objects, each representing an emission factor. Key fields include:</p><ul><li><code>id</code>: Unique identifier.</li><li><code>year</code>: Applicable year (e.g., 2023) or <code>null</code> if generic.</li><li><code>category</code>: Product/service category.</li><li><code>material</code>: Specific material (can be <code>null</code>).</li><li><code>process</code>: Specific process (can be <code>null</code>).</li><li><code>country</code>: Specific country or "Global" (can be <code>null</code>, implying Global).</li><li><code>factor</code>: The numerical emission factor value.</li><li><code>unit</code>: The unit of the factor (e.g., "kgCO2e/kg", "kgCO2e/EUR").</li><li><code>source</code>: The source of the emission factor data (e.g., "EcoInvent 3.9.1_Sim_DE_23").</li></ul><p>The database includes specific factors, more generic ones (where material, process, or country might be null/Global), and "Default Fallback" factors for cases where no primary matches are found.</p>
                </div> 
            </div> 
        </section>
        <footer class="footer"> Developed by Anvar Darbayev </footer>
    </div> 
